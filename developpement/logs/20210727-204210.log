lora_mac-INFO-  2021-07-27 20:42:10,694-Init MAC
lora_phy-INFO-  2021-07-27 20:42:10,695-Init PHY
lora_phy-DEBUG-  2021-07-27 20:42:10,698-append UartFrame(expected_response=[<UartResponse.U_INT: '4294967245'>], data='', cmd=<UartCommand.MAC_PAUSE: 'mac pause'>) to tx_buf
lora_phy-DEBUG-  2021-07-27 20:42:10,698-append UartFrame(expected_response=[<UartResponse.OK: 'ok'>], data='868100000', cmd=<UartCommand.SET_FREQ: 'radio set freq '>) to tx_buf
lora_phy-INFO-  2021-07-27 20:42:10,698-Send UART data:UartFrame(expected_response=[<UartResponse.U_INT: '4294967245'>], data='', cmd=<UartCommand.MAC_PAUSE: 'mac pause'>)
lora_phy-DEBUG-  2021-07-27 20:42:10,699-append UartFrame(expected_response=[<UartResponse.OK: 'ok'>], data='0', cmd=<UartCommand.SET_WDT: 'radio set wdt '>) to tx_buf
lora_phy-DEBUG-  2021-07-27 20:42:10,699-append UartFrame(expected_response=[<UartResponse.RADIO_ERR: 'radio_err'>, <UartResponse.RADIO_RX: 'radio_rx'>], data='0', cmd=<UartCommand.RX: 'radio rx '>) to tx_buf
lora_phy-INFO-  2021-07-27 20:42:10,712-process uart response: 4294967245
lora_phy-INFO-  2021-07-27 20:42:10,712-Send UART data:UartFrame(expected_response=[<UartResponse.OK: 'ok'>], data='868100000', cmd=<UartCommand.SET_FREQ: 'radio set freq '>)
lora_phy-INFO-  2021-07-27 20:42:10,726-process uart response: ok
lora_phy-INFO-  2021-07-27 20:42:10,727-Send UART data:UartFrame(expected_response=[<UartResponse.OK: 'ok'>], data='0', cmd=<UartCommand.SET_WDT: 'radio set wdt '>)
lora_phy-INFO-  2021-07-27 20:42:10,736-process uart response: ok
lora_phy-INFO-  2021-07-27 20:42:10,737-Send UART data:UartFrame(expected_response=[<UartResponse.RADIO_ERR: 'radio_err'>, <UartResponse.RADIO_RX: 'radio_rx'>], data='0', cmd=<UartCommand.RX: 'radio rx '>)
lora_phy-INFO-  2021-07-27 20:42:10,744-process uart response: ok
lora_phy-DEBUG-  2021-07-27 20:42:10,744-unexpected response
main-DEBUG-  2021-07-27 20:42:11,444-[766: INFO: LoRa PHY  ] UART response:radio_tx_ok
main-DEBUG-  2021-07-27 20:42:11,445-[766: DBG : LoRa PHY  ] compare response with:radio_tx_ok
main-DEBUG-  2021-07-27 20:42:11,445-[766: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:11,446-[766: INFO: LoRa PHY  ] Write UART:radio set wdt 3000
main-DEBUG-  2021-07-27 20:42:11,467-[766: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:11,468-[766: DBG : LoRa PHY  ] compare response with:ok
main-DEBUG-  2021-07-27 20:42:11,469-[766: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:11,470-[766: INFO: LoRa PHY  ] Write UART:radio rx 0
main-DEBUG-  2021-07-27 20:42:11,486-[766: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:11,487-[766: DBG : LoRa PHY  ] compare response with:radio_err
main-DEBUG-  2021-07-27 20:42:11,488-[766: DBG : LoRa PHY  ] compare response with:radio_rx
main-DEBUG-  2021-07-27 20:42:14,487-[769: INFO: LoRa PHY  ] UART response:radio_err
main-DEBUG-  2021-07-27 20:42:14,489-[769: DBG : LoRa PHY  ] compare response with:radio_err
main-DEBUG-  2021-07-27 20:42:14,491-[769: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:15,383-[770: INFO: LoRa MAC  ] retransmit timeout !
main-DEBUG-  2021-07-27 20:42:15,385-[770: ERR : LoRa MAC  ] STOP retransmit timer thanks to retransmit_timeout
main-DEBUG-  2021-07-27 20:42:15,388-[770: INFO: LoRa MAC  ] Unable to send frame {src:2:24859 dest:1:0 k:0 seq:25 next:0 cmd:6 data:
main-DEBUG-  2021-07-27 20:42:15,393-[770: DBG : LoRa MAC  ] START query_timer because last send frame is a QUERY
main-DEBUG-  2021-07-27 20:42:15,394-[770: DBG : LoRa MAC  ] state is READY
main-DEBUG-  2021-07-27 20:42:15,394-[770: WARN: LoRa MAC  ] buf not empty: 0
main-DEBUG-  2021-07-27 20:42:25,405-[780: INFO: LoRa MAC  ] Query timeout !
main-DEBUG-  2021-07-27 20:42:25,408-[780: DBG : LoRa MAC  ] STOP query timer thanks to query_timeout
main-DEBUG-  2021-07-27 20:42:25,409-[780: DBG : LoRa MAC  ] query frame built
main-DEBUG-  2021-07-27 20:42:25,427-[780: DBG : LoRa MAC  ] Enter enqueue_packet with frame: {src:2:24859 dest:1:0 k:0 seq:26 next:0 cmd:6 data:
main-DEBUG-  2021-07-27 20:42:25,427-[780: DBG : LoRa MAC  ] append to buffer
main-DEBUG-  2021-07-27 20:42:25,428-[780: DBG : LoRa MAC  ] post new_tx_frame_event to TX_PROCESS
main-DEBUG-  2021-07-27 20:42:25,429-[780: DBG : LoRa MAC  ] frame from buffer: {src:2:24859 dest:1:0 k:0 seq:26 next:0 cmd:6 data:
main-DEBUG-  2021-07-27 20:42:25,450-[780: DBG : LoRa MAC  ] buffer size: 0
main-DEBUG-  2021-07-27 20:42:25,450-[780: DBG : LoRa PHY  ] enter UART_TX
main-DEBUG-  2021-07-27 20:42:25,452-[780: DBG : LoRa PHY  ] append { cmd:radio set wdt  resp: [ok, none] }[780: DBG : LoRa PHY  ]  to UART TX buffer
main-DEBUG-  2021-07-27 20:42:25,452-[780: DBG : LoRa PHY  ] enter UART_TX
main-DEBUG-  2021-07-27 20:42:25,472-[780: DBG : LoRa PHY  ] append { cmd:radio tx  resp: [radio_tx_ok, radio_err] }[780: DBG : LoRa PHY  ]  to UART TX buffer
main-DEBUG-  2021-07-27 20:42:25,474-[780: DBG : LoRa MAC  ] frame sended to PHY layer
main-DEBUG-  2021-07-27 20:42:25,475-[780: DBG : LoRa MAC  ] START retransmit timer in mac_tx process
main-DEBUG-  2021-07-27 20:42:25,476-[780: DBG : LoRa MAC  ] Listen during 3 s
main-DEBUG-  2021-07-27 20:42:25,494-[780: DBG : LoRa PHY  ] enter UART_TX
main-DEBUG-  2021-07-27 20:42:25,495-[780: DBG : LoRa PHY  ] append { cmd:radio set wdt  resp: [ok, none] }[780: DBG : LoRa PHY  ]  to UART TX buffer
main-DEBUG-  2021-07-27 20:42:25,496-[780: DBG : LoRa PHY  ] enter UART_TX
main-DEBUG-  2021-07-27 20:42:25,507-[780: DBG : LoRa PHY  ] append { cmd:radio rx  resp: [radio_err, radio_rx] }[780: DBG : LoRa PHY  ]  to UART TX buffer
main-DEBUG-  2021-07-27 20:42:25,508-[780: DBG : LoRa MAC  ] wait state change to READY
main-DEBUG-  2021-07-27 20:42:25,509-[780: INFO: LoRa PHY  ] Write UART:radio set wdt 0
main-DEBUG-  2021-07-27 20:42:25,535-[780: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:25,537-[780: DBG : LoRa PHY  ] compare response with:ok
main-DEBUG-  2021-07-27 20:42:25,538-[780: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:25,541-[780: DBG : LoRa PHY  ] to frame receive: {src:2:24859 dest:1:0 k:0 seq:26 next:0 cmd:6 data:
main-DEBUG-  2021-07-27 20:42:25,556-[780: DBG : LoRa PHY  ]
main-DEBUG-  2021-07-27 20:42:25,557-[780: DBG : LoRa PHY  ] src.prefix: 2
main-DEBUG-  2021-07-27 20:42:25,558-[780: DBG : LoRa PHY  ] src addr: 02611B
main-DEBUG-  2021-07-27 20:42:25,560-[780: DBG : LoRa PHY  ] dest addr: 010000
main-DEBUG-  2021-07-27 20:42:25,561-[780: DBG : LoRa PHY  ] flags and command:06
main-DEBUG-  2021-07-27 20:42:25,562-[780: DBG : LoRa PHY  ] SN:1A
main-DEBUG-  2021-07-27 20:42:25,564-[780: DBG : LoRa PHY  ] TO HEX frame: 02611B010000061A
main-DEBUG-  2021-07-27 20:42:25,565-[780: INFO: LoRa PHY  ] Write UART:radio tx 02611B010000061A
main-DEBUG-  2021-07-27 20:42:25,585-[780: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:25,586-[780: DBG : LoRa PHY  ] compare response with:radio_tx_ok
main-DEBUG-  2021-07-27 20:42:25,586-[780: DBG : LoRa PHY  ] compare response with:radio_err
main-DEBUG-  2021-07-27 20:42:26,583-[781: INFO: LoRa PHY  ] UART response:radio_tx_ok
main-DEBUG-  2021-07-27 20:42:26,583-[781: DBG : LoRa PHY  ] compare response with:radio_tx_ok
main-DEBUG-  2021-07-27 20:42:26,584-[781: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:26,585-[781: INFO: LoRa PHY  ] Write UART:radio set wdt 3000
lora_phy-INFO-  2021-07-27 20:42:26,597-process uart response: radio_rx  02611B010000061A
lora_phy-DEBUG-  2021-07-27 20:42:26,597-build frame receive data: 02611B010000061A

Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python3.8/threading.py", line 932, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.8/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
  File "/home/arnaud/Documents/cours/universite/cours2020-2021/memoire/ma2_memoire/developpement/py_lora_mac/lora_phy.py", line 230, in uart_rx
    if self.process_response(data.strip()):
  File "/home/arnaud/Documents/cours/universite/cours2020-2021/memoire/ma2_memoire/developpement/py_lora_mac/lora_phy.py", line 222, in process_response
    self.listener(LoraFrame.build(decode_data[10:].strip()))
  File "/home/arnaud/Documents/cours/universite/cours2020-2021/memoire/ma2_memoire/developpement/py_lora_mac/lora_phy.py", line 128, in build
    seq = int(data[14:16])
ValueError: invalid literal for int() with base 10: '1A'

main-DEBUG-  2021-07-27 20:42:26,606-[781: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:26,606-[781: DBG : LoRa PHY  ] compare response with:ok
main-DEBUG-  2021-07-27 20:42:26,607-[781: DBG : LoRa PHY  ]  expected !
main-DEBUG-  2021-07-27 20:42:26,608-[781: INFO: LoRa PHY  ] Write UART:radio rx 0
main-DEBUG-  2021-07-27 20:42:26,624-[781: INFO: LoRa PHY  ] UART response:ok
main-DEBUG-  2021-07-27 20:42:26,627-[781: DBG : LoRa PHY  ] compare response with:radio_err
main-DEBUG-  2021-07-27 20:42:26,628-[781: DBG : LoRa PHY  ] compare response with:radio_rx
main-DEBUG-  2021-07-27 20:42:29,625-[784: INFO: LoRa PHY  ] UART response:radio_err
main-DEBUG-  2021-07-27 20:42:29,628-[784: DBG : LoRa PHY  ] compare response with:radio_err
main-DEBUG-  2021-07-27 20:42:29,630-[784: DBG : LoRa PHY  ]  expected !
