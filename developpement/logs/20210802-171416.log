lora_mac-INFO-  2021-08-02 17:14:16,160-Init MAC
lora_phy-INFO-  2021-08-02 17:14:16,160-Init PHY
lora_phy-INFO-  2021-08-02 17:14:16,163-PHY TX:mac pause
main-DEBUG-  2021-08-02 17:14:16,167-enter send data test
lora_phy-INFO-  2021-08-02 17:14:16,177-PHY TX:radio set freq 868100000
lora_phy-INFO-  2021-08-02 17:14:16,191-PHY TX:radio set wdt 0
lora_phy-INFO-  2021-08-02 17:14:16,199-PHY TX:radio rx 0
main-DEBUG-  2021-08-02 17:14:18,270-[6: INFO: Interface ] Button pushed
main-DEBUG-  2021-08-02 17:14:18,271-[6: INFO: LoRa MAC  ] Init LoRa MAC
main-DEBUG-  2021-08-02 17:14:18,273-[6: INFO: LoRa MAC  ] Node ID: 24859
main-DEBUG-  2021-08-02 17:14:18,277-[6: INFO: LoRa MAC  ] New Link-layer address: 5f75.6d6f.6e73.611b[6: INFO: LoRa MAC  ]
main-DEBUG-  2021-08-02 17:14:18,277-[6: DBG : LoRa MAC  ] initial state: 0
main-DEBUG-  2021-08-02 17:14:18,283-[6: INFO: LoRa PHY  ] Init LoRa PHY
main-DEBUG-  2021-08-02 17:14:18,284-[6: DBG : LoRa MAC  ] SET retransmit timer
main-DEBUG-  2021-08-02 17:14:18,284-[6: DBG : LoRa MAC  ] initialization complete
main-DEBUG-  2021-08-02 17:14:18,285-[6: INFO: LoRa PHY  ] PHY TX:mac pause
main-DEBUG-  2021-08-02 17:14:18,299-[6: INFO: LoRa PHY  ] PHY TX:radio set freq 868100000
main-DEBUG-  2021-08-02 17:14:18,315-[6: INFO: LoRa PHY  ] PHY TX:radio set wdt 0
main-DEBUG-  2021-08-02 17:14:18,325-[6: INFO: LoRa PHY  ] PHY TX:radio tx 1B611B0100000000
main-DEBUG-  2021-08-02 17:14:19,332-[7: INFO: LoRa PHY  ] PHY TX:radio set wdt 3000
main-DEBUG-  2021-08-02 17:14:19,343-[7: INFO: LoRa PHY  ] PHY TX:radio rx 0
lora_phy-INFO-  2021-08-02 17:14:19,359-PHY RX:1B611B0100000000
lora_mac-DEBUG-  2021-08-02 17:14:19,359-RX process receive
lora_mac-DEBUG-  2021-08-02 17:14:19,359-RX process set is_listen=False
lora_mac-DEBUG-  2021-08-02 17:14:19,359-RX process: call mac_rx
lora_mac-DEBUG-  2021-08-02 17:14:19,360-MAC RX: LoraFrame(src_addr=LoraAddr(prefix=27, node_id=24859), dest_addr=LoraAddr(prefix=1, node_id=0), command=<MacCommand.JOIN: 0>, payload='', seq=0, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:19,360-look child with prefix: 27
lora_mac-DEBUG-  2021-08-02 17:14:19,360-child is: None
lora_mac-INFO-  2021-08-02 17:14:19,360-reveive join frame LoraFrame(src_addr=LoraAddr(prefix=27, node_id=24859), dest_addr=LoraAddr(prefix=1, node_id=0), command=<MacCommand.JOIN: 0>, payload='', seq=0, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:19,361-new child Child(2:24859) created
lora_mac-DEBUG-  2021-08-02 17:14:19,361-send join response
lora_phy-INFO-  2021-08-02 17:14:19,361-MAC send:LoraFrame(src_addr=LoraAddr(prefix=1, node_id=0), dest_addr=LoraAddr(prefix=27, node_id=24859), command=<MacCommand.JOIN_RESPONSE: 1>, payload='02', seq=0, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:19,361-RX process: mac_rx end
lora_phy-INFO-  2021-08-02 17:14:19,362-PHY TX:radio tx 0100001B611B010002
lora_mac-DEBUG-  2021-08-02 17:14:19,362-RX process acquire lock for can_listen
lora_mac-DEBUG-  2021-08-02 17:14:19,362-can listen: True
lora_mac-DEBUG-  2021-08-02 17:14:19,363-is_listen: False
lora_phy-INFO-  2021-08-02 17:14:20,367-PHY TX:radio rx 0
main-DEBUG-  2021-08-02 17:14:20,424-[8: INFO: LoRa PHY  ] PHY RX:0100001B611B010002
main-DEBUG-  2021-08-02 17:14:20,428-[8: INFO: LoRa MAC  ] RX LoRa frame: {src:1:0 dest:27:24859 k:0 seq:0 next:0 cmd:1 data:02
main-DEBUG-  2021-08-02 17:14:20,429-[8: DBG : LoRa MAC  ] JOIN RESPONSE
main-DEBUG-  2021-08-02 17:14:20,430-[8: DBG : LoRa MAC  ] state = READY
main-DEBUG-  2021-08-02 17:14:20,443-[8: DBG : LoRa MAC  ] STOP retransmit timer
main-DEBUG-  2021-08-02 17:14:20,444-[8: INFO: LoRa MAC  ] Lora Root joined
main-DEBUG-  2021-08-02 17:14:20,445-[8: INFO: LoRa MAC  ] Node addr: 2:24859
main-DEBUG-  2021-08-02 17:14:20,446-[8: DBG : LoRa MAC  ] START TX_PROCESS
main-DEBUG-  2021-08-02 17:14:20,447-[8: DBG : LoRa MAC  ] MAC_TX process started
main-DEBUG-  2021-08-02 17:14:20,447-[8: DBG : LoRa MAC  ] SET query timer
main-DEBUG-  2021-08-02 17:14:23,173-send data ! HELLO
main-DEBUG-  2021-08-02 17:14:30,181-send data ! HELLO
main-DEBUG-  2021-08-02 17:14:30,417-[18: INFO: LoRa MAC  ] Query timeout !
main-DEBUG-  2021-08-02 17:14:30,419-[18: DBG : LoRa MAC  ] STOP query timer thanks to query_timeout
main-DEBUG-  2021-08-02 17:14:30,421-[18: DBG : LoRa MAC  ] query frame built
main-DEBUG-  2021-08-02 17:14:30,439-[18: DBG : LoRa MAC  ] Enter enqueue_packet with frame: {src:2:24859 dest:1:0 k:0 seq:1 next:0 cmd:6 data:
main-DEBUG-  2021-08-02 17:14:30,440-[18: DBG : LoRa MAC  ] append to buffer
main-DEBUG-  2021-08-02 17:14:30,442-[18: DBG : LoRa MAC  ] post new_tx_frame_event to TX_PROCESS
main-DEBUG-  2021-08-02 17:14:30,443-[18: DBG : LoRa MAC  ] frame from buffer: {src:2:24859 dest:1:0 k:0 seq:1 next:0 cmd:6 data:
main-DEBUG-  2021-08-02 17:14:30,444-[18: DBG : LoRa MAC  ] buffer size: 0
main-DEBUG-  2021-08-02 17:14:30,461-[18: DBG : LoRa MAC  ] frame sended to PHY layer
main-DEBUG-  2021-08-02 17:14:30,463-[18: DBG : LoRa MAC  ] START retransmit timer in mac_tx process
main-DEBUG-  2021-08-02 17:14:30,464-[18: DBG : LoRa MAC  ] Listen during 3 s
main-DEBUG-  2021-08-02 17:14:30,468-[18: DBG : LoRa MAC  ] wait state change to READY
main-DEBUG-  2021-08-02 17:14:30,471-[18: INFO: LoRa PHY  ] PHY TX:radio set wdt 0
main-DEBUG-  2021-08-02 17:14:30,475-[18: INFO: LoRa PHY  ] PHY TX:radio tx 02611B0100000601
main-DEBUG-  2021-08-02 17:14:31,478-[19: INFO: LoRa PHY  ] PHY TX:radio set wdt 3000
main-DEBUG-  2021-08-02 17:14:31,489-[19: INFO: LoRa PHY  ] PHY TX:radio rx 0
lora_phy-INFO-  2021-08-02 17:14:31,505-PHY RX:02611B0100000601
lora_mac-DEBUG-  2021-08-02 17:14:31,505-RX process receive
lora_mac-DEBUG-  2021-08-02 17:14:31,505-RX process set is_listen=False
lora_mac-DEBUG-  2021-08-02 17:14:31,505-RX process: call mac_rx
lora_mac-DEBUG-  2021-08-02 17:14:31,506-MAC RX: LoraFrame(src_addr=LoraAddr(prefix=2, node_id=24859), dest_addr=LoraAddr(prefix=1, node_id=0), command=<MacCommand.QUERY: 6>, payload='', seq=1, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:31,506-look child with prefix: 2
lora_mac-DEBUG-  2021-08-02 17:14:31,506-child is: Child(2:24859)
lora_mac-DEBUG-  2021-08-02 17:14:31,506-In _on_query
lora_mac-DEBUG-  2021-08-02 17:14:31,506-look for next frame
lora_mac-DEBUG-  2021-08-02 17:14:31,506-RX process: mac_rx end
lora_mac-DEBUG-  2021-08-02 17:14:31,506-queue sizeA:2
lora_mac-DEBUG-  2021-08-02 17:14:31,507-RX process acquire lock for can_listen
lora_mac-DEBUG-  2021-08-02 17:14:31,507-next is: LoraFrame(src_addr=LoraAddr(prefix=1, node_id=0), dest_addr=LoraAddr(prefix=2, node_id=24859), command=<MacCommand.DATA: 2>, payload='68656C6C6F30', seq=0, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:31,507-can listen: False
lora_mac-DEBUG-  2021-08-02 17:14:31,507-queue sizeB:1
lora_mac-DEBUG-  2021-08-02 17:14:31,507-is_listen: False
lora_mac-DEBUG-  2021-08-02 17:14:31,507-send next frame
lora_phy-INFO-  2021-08-02 17:14:31,508-MAC send:LoraFrame(src_addr=LoraAddr(prefix=1, node_id=0), dest_addr=LoraAddr(prefix=2, node_id=24859), command=<MacCommand.DATA: 2>, payload='68656C6C6F30', seq=1, k=False, has_next=True)
lora_mac-DEBUG-  2021-08-02 17:14:31,508-I don't need ack
lora_phy-INFO-  2021-08-02 17:14:31,508-PHY TX:radio tx 01000002611B420168656C6C6F30
lora_mac-DEBUG-  2021-08-02 17:14:31,508-wait for a possible retransmission query from the child
lora_mac-DEBUG-  2021-08-02 17:14:31,508-WAIT retransmit
lora_mac-DEBUG-  2021-08-02 17:14:32,509-has retransmit: False
lora_mac-DEBUG-  2021-08-02 17:14:32,509-look for next frame
lora_mac-DEBUG-  2021-08-02 17:14:32,509-queue sizeA:1
lora_mac-DEBUG-  2021-08-02 17:14:32,510-next is: LoraFrame(src_addr=LoraAddr(prefix=1, node_id=0), dest_addr=LoraAddr(prefix=2, node_id=24859), command=<MacCommand.DATA: 2>, payload='68656C6C6F31', seq=0, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:32,510-queue sizeB:0
lora_mac-DEBUG-  2021-08-02 17:14:32,511-send next frame
lora_phy-INFO-  2021-08-02 17:14:32,512-MAC send:LoraFrame(src_addr=LoraAddr(prefix=1, node_id=0), dest_addr=LoraAddr(prefix=2, node_id=24859), command=<MacCommand.DATA: 2>, payload='68656C6C6F31', seq=2, k=False, has_next=False)
lora_mac-DEBUG-  2021-08-02 17:14:32,512-I don't need ack
lora_mac-DEBUG-  2021-08-02 17:14:32,513-wait for a possible retransmission query from the child
lora_mac-DEBUG-  2021-08-02 17:14:32,514-WAIT retransmit
lora_phy-INFO-  2021-08-02 17:14:32,679-PHY TX:radio tx 01000002611B020268656C6C6F31
main-DEBUG-  2021-08-02 17:14:32,739-[20: INFO: LoRa PHY  ] PHY RX:01000002611B420168656C6C6F3
main-DEBUG-  2021-08-02 17:14:32,740-[20: INFO: LoRa MAC  ] RX LoRa frame: {src:1:0 dest:2:24859 k:0 seq:1 next:1 cmd:2 data:68656C6C6F3
main-DEBUG-  2021-08-02 17:14:32,741-[20: INFO: LoRa MAC  ] ON_DATA!
main-DEBUG-  2021-08-02 17:14:32,749-[20: DBG : LoRa MAC  ] STOP retransmit and query timeout
main-DEBUG-  2021-08-02 17:14:32,749-[20: DBG : LoRa MAC  ] More data will follow -> listen
main-DEBUG-  2021-08-02 17:14:32,750-[20: INFO: LoRa PHY  ] PHY TX:radio set wdt 3000
main-DEBUG-  2021-08-02 17:14:32,760-[20: INFO: LoRa PHY  ] PHY TX:radio rx 0
lora_mac-DEBUG-  2021-08-02 17:14:33,514-has retransmit: False
lora_phy-INFO-  2021-08-02 17:14:33,850-PHY TX:radio rx 0
main-DEBUG-  2021-08-02 17:14:33,910-[22: INFO: LoRa PHY  ] PHY RX:01000002611B020268656C6C6F3
main-DEBUG-  2021-08-02 17:14:33,911-[22: INFO: LoRa MAC  ] RX LoRa frame: {src:1:0 dest:2:24859 k:0 seq:2 next:0 cmd:2 data:68656C6C6F3
main-DEBUG-  2021-08-02 17:14:33,912-[22: INFO: LoRa MAC  ] ON_DATA!
main-DEBUG-  2021-08-02 17:14:33,924-[22: DBG : LoRa MAC  ] STOP retransmit and query timeout
main-DEBUG-  2021-08-02 17:14:33,925-[22: DBG : LoRa MAC  ] no data follows -> state=Ready and restart query_timer
main-DEBUG-  2021-08-02 17:14:33,925-[22: DBG : LoRa MAC  ] state is READY
main-DEBUG-  2021-08-02 17:14:33,926-[22: WARN: LoRa MAC  ] buf not empty: 0
main-DEBUG-  2021-08-02 17:14:37,185-send data ! HELLO
